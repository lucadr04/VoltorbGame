#ifndef FONT6X10_H
#define FONT6X10_H

#include <stdint.h>
#include <stdio.h>

#include <nds.h>

#include <nf_lib.h>

#define DIGIT_W 6
#define DIGIT_H 10
#define DIGIT_COUNT 10

static const uint8_t digit_font[DIGIT_COUNT][DIGIT_H][DIGIT_W] = {
    // 0
    {
        {0,1,1,1,1,0},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {0,1,1,1,1,0},
        {0,0,0,0,0,0}
    },
    // 1
    {
        {0,0,1,1,0,0},
        {0,1,1,1,0,0},
        {1,0,1,1,0,0},
        {0,0,1,1,0,0},
        {0,0,1,1,0,0},
        {0,0,1,1,0,0},
        {0,0,1,1,0,0},
        {0,0,1,1,0,0},
        {1,1,1,1,1,1},
        {0,0,0,0,0,0}
    },
    // 2
    {
        {0,1,1,1,1,0},
        {1,0,0,0,0,1},
        {0,0,0,0,1,0},
        {0,0,0,1,0,0},
        {0,0,1,0,0,0},
        {0,1,0,0,0,0},
        {1,0,0,0,0,0},
        {1,0,0,0,0,0},
        {1,1,1,1,1,1},
        {0,0,0,0,0,0}
    },
    // 3
    {
        {0,1,1,1,1,0},
        {1,0,0,0,0,1},
        {0,0,0,0,1,0},
        {0,0,0,1,0,0},
        {0,0,1,1,0,0},
        {0,0,0,1,0,0},
        {0,0,0,0,1,0},
        {1,0,0,0,0,1},
        {0,1,1,1,1,0},
        {0,0,0,0,0,0}
    },
    // 4
    {
        {0,0,0,1,0,0},
        {0,0,1,1,0,0},
        {0,1,0,1,0,0},
        {1,0,0,1,0,0},
        {1,0,0,1,0,0},
        {1,1,1,1,1,1},
        {0,0,0,1,0,0},
        {0,0,0,1,0,0},
        {0,0,0,1,0,0},
        {0,0,0,0,0,0}
    },
    // 5
    {
        {1,1,1,1,1,1},
        {1,0,0,0,0,0},
        {1,0,0,0,0,0},
        {1,1,1,1,1,0},
        {0,0,0,0,0,1},
        {0,0,0,0,0,1},
        {0,0,0,0,0,1},
        {1,0,0,0,0,1},
        {0,1,1,1,1,0},
        {0,0,0,0,0,0}
    },
    // 6
    {
        {0,0,1,1,1,0},
        {0,1,0,0,0,0},
        {1,0,0,0,0,0},
        {1,1,1,1,1,0},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {0,1,1,1,1,0},
        {0,0,0,0,0,0}
    },
    // 7
    {
        {1,1,1,1,1,1},
        {0,0,0,0,0,1},
        {0,0,0,0,1,0},
        {0,0,0,1,0,0},
        {0,0,1,0,0,0},
        {0,1,0,0,0,0},
        {0,1,0,0,0,0},
        {1,0,0,0,0,0},
        {1,0,0,0,0,0},
        {0,0,0,0,0,0}
    },
    // 8
    {
        {0,1,1,1,1,0},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {0,1,1,1,1,0},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {0,1,1,1,1,0},
        {0,0,0,0,0,0}
    },
    // 9
    {
        {0,1,1,1,1,0},
        {1,0,0,0,0,1},
        {1,0,0,0,0,1},
        {0,1,1,1,1,1},
        {0,0,0,0,0,1},
        {0,0,0,0,0,1},
        {0,0,0,0,0,1},
        {1,0,0,0,0,1},
        {0,1,1,1,1,0},
        {0,0,0,0,0,0}
    }
};

// Function to draw the numbers inside the helpers on the background
// It is necessary to redraw the background afterwards
void draw_digit_to_bg(int bg, int x, int y, int digit, uint8_t color)
{
    if (digit < 0 || digit >= DIGIT_COUNT) return;

    // pointer to 8-bit background pixel data for the chosen screen/bg
    u8 *bgData = NF_BG8B[bg].data;
    if (!bgData) return;

    for (int row = 0; row < DIGIT_H; ++row) {
        int yy = y + row;
        if (yy < 0 || yy >= 192) continue;

        for (int col = 0; col < DIGIT_W; ++col) {
            int xx = x + col;
            if (xx < 0 || xx >= 256) continue;

            if (digit_font[digit][row][col]) {
                bgData[yy * 256 + xx] = color;
            }
        }
    }
}


#endif // FONT6X10_H
